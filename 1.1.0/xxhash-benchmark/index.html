<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawCharts);
      function drawCharts() {
         var datas = [
          ['16', 13.4, 59.8, 61.8, 22.4, 98.6, 107.6, 98, 52.6, 13.6, 22.3],
          ['128', 138.5, 171.9, 119, 116, 291.1, 299.1, 256.2, 71.3, 38, 93.8],
          ['1024', 1133, 1065, 591, 771, 1870, 1896, 1094, 233, 228, 611],
          ['8196', 9138, 8281, 4209, 5986, 14353, 14342, 7655, 1471, 1716, 4681],
          ['65536', 72528, 65780, 32810, 47417, 111035, 110768, 59871, 11405, 13558, 37744],
          ['524288', 559983, 521965, 260899, 377873, 924580, 938159, 480433, 91563, 117010, 301522]];

        for (var i = 0; i < datas.length; i++) {

          var data = google.visualization.arrayToDataTable([
            ['Input size', 'Arrays.hashCode', 'CRC-32', 'Adler-32', 'Murmur2', 'Murmur3', 'Hashing.goodFastHash(32)', 'Hashing.goodFastHash(64)', 'XXHash (JNI)', 'XXHash (Java+Unsafe)', 'XXHash (Java)'],
            datas[i]
          ]);

          var chart = new google.visualization.ColumnChart(document.getElementById('chart_div_' + datas[i][0]));
          chart.draw(data, { title: 'Time to hash ' + datas[i][0] + ' bytes (nanoseconds)' });
        }
      }
    </script>
  </head>
  <body>
<p>Benchmarks of some Java hash functions. Please note that this benchmark only computes the hash function performance, not its quality. A good slow hash function will always provide better hashtable performance than a bad fast hash function. However, some of the fast functions benchmarked, such as XXHash and Murmur3 are known to be good hash functions (XXHash for instance has a <a href="http://code.google.com/p/smhasher/wiki/SMHasher">SMHasher</a> score of 10).</p>

<p>The souce code used for this benchmark can be found at <a href="http://github.com/jpountz/jvm-checksum-benchmark">github.com/jpountz/jvm-checksum-benchmark</a>.</p>

<ul>
<li><b>Arrays.hashCode</b> is the hash function specified in the <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#hashCode(byte[])">java.util.Arrays.hashCode(byte[])</a> method,</li>
<li><b>CRC-32</b> is the <a href="http://docs.oracle.com/javase/6/docs/api/java/util/zip/CRC32.html">java.util.zip.CRC32</a>.</li>
<li><b>Adler-32</b> is the <a href="http://docs.oracle.com/javase/6/docs/api/java/util/zip/CRC32.html">java.util.zip.Adler32</a>.</li>
<li><b>Murmur2</b> is a <a href="https://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/codecs/src/java/org/apache/lucene/codecs/bloom/MurmurHash2.java">Java implementation</a> of the version 2 of MurmurHash.</li>
<li><b>Murmur3</b> is the Java implementation of MurmurHash version 3 found in <a href="http://docs.guava-libraries.googlecode.com/git-history/v11.0/javadoc/com/google/common/hash/Hashing.html#murmur3_32()">Guava</a>.</li>
<li><b>Hashing.goodFastHash(32)</b> and <b>Hashing.goodFastHash(64)</b> are two hash implementations from <a href="http://docs.guava-libraries.googlecode.com/git-history/v11.0/javadoc/com/google/common/hash/Hashing.html#goodFastHash(int)">Guava</a>.</li>
<li>the <b>XXHash</b> hash functions are those found in <a href="http://github.com/jpountz/lz4-java">lz4-java</a>.</li>
</ul>

    <div id="chart_div_16" style="width: 1200px; height: 500px;"></div>
    <div id="chart_div_128" style="width: 1200px; height: 500px;"></div>
    <div id="chart_div_1024" style="width: 1200px; height: 500px;"></div>
    <div id="chart_div_8196" style="width: 1200px; height: 500px;"></div>
    <div id="chart_div_65536" style="width: 1200px; height: 500px;"></div>
    <div id="chart_div_524288" style="width: 1200px; height: 500px;"></div>
  </body>
</html>
